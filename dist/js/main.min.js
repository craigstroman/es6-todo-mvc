!function e(t,i,n){function o(l,a){if(!i[l]){if(!t[l]){var u="function"==typeof require&&require;if(!a&&u)return u(l,!0);if(r)return r(l,!0);var s=new Error("Cannot find module '"+l+"'");throw s.code="MODULE_NOT_FOUND",s}var c=i[l]={exports:{}};t[l][0].call(c.exports,function(e){var i=t[l][1][e];return o(i?i:e)},c,c.exports,e,t,i,n)}return i[l].exports}for(var r="function"==typeof require&&require,l=0;l<n.length;l++)o(n[l]);return o}({1:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=e("./controller/controller"),r=n(o),l=e("./helpers/helpers"),a=e("./template/template"),u=n(a),s=e("./store/store"),c=n(s),d=e("./view/view"),f=n(d),v=new c.default("todos-vanilla-es6"),m=new u.default,h=new f.default(m),p=new r.default(v,h),y=function(){return p.setView(document.location.hash)};(0,l.$on)(window,"load",y),(0,l.$on)(window,"hashchange",y)},{"./controller/controller":2,"./helpers/helpers":3,"./store/store":5,"./template/template":6,"./view/view":7}],2:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("../item/item"),a=e("../store/store"),u=(n(a),e("../view/view")),s=(n(u),function(){function e(t,i){var n=this;o(this,e),this.store=t,this.view=i,i.bindAddItem(this.addItem.bind(this)),i.bindEditItemSave(this.editItemSave.bind(this)),i.bindEditItemCancel(this.editItemCancel.bind(this)),i.bindRemoveItem(this.removeItem.bind(this)),i.bindToggleItem(function(e,t){n.toggleCompleted(e,t),n._filter()}),i.bindRemoveCompleted(this.removeCompletedItems.bind(this)),i.bindToggleAll(this.toggleAll.bind(this)),this._activeRoute="",this._lastActiveRoute=null}return r(e,[{key:"setView",value:function(e){var t=e.replace(/^#\//,"");this._activeRoute=t,this._filter(),this.view.updateFilterButtons(t)}},{key:"addItem",value:function(e){var t=this;this.store.insert({id:Date.now(),title:e,completed:!1},function(){t.view.clearNewTodo(),t._filter(!0)})}},{key:"editItemSave",value:function(e,t){var i=this;t.length?this.store.update({id:e,title:t},function(){i.view.editItemDone(e,t)}):this.removeItem(e)}},{key:"editItemCancel",value:function(e){var t=this;this.store.find({id:e},function(i){var n=i[0].title;t.view.editItemDone(e,n)})}},{key:"removeItem",value:function(e){var t=this;this.store.remove({id:e},function(){t._filter(),t.view.removeItem(e)})}},{key:"removeCompletedItems",value:function(){this.store.remove({completed:!0},this._filter.bind(this))}},{key:"toggleCompleted",value:function(e,t){var i=this;this.store.update({id:e,completed:t},function(){i.view.setItemComplete(e,t)})}},{key:"toggleAll",value:function(e){var t=this;this.store.find({completed:!e},function(i){var n=!0,o=!1,r=void 0;try{for(var l,a=i[Symbol.iterator]();!(n=(l=a.next()).done);n=!0){var u=l.value.id;t.toggleCompleted(u,e)}}catch(e){o=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}}),this._filter()}},{key:"_filter",value:function(e){var t=this,i=this._activeRoute;(e||""!==this._lastActiveRoute||this._lastActiveRoute!==i)&&this.store.find({"":l.emptyItemQuery,active:{completed:!1},completed:{completed:!0}}[i],this.view.showItems.bind(this.view)),this.store.count(function(e,i,n){t.view.setItemsLeft(i),t.view.setClearCompletedButtonVisibility(n),t.view.setCompleteAllCheckbox(n===e),t.view.setMainVisibility(e)}),this._lastActiveRoute=i}}]),e}());i.default=s},{"../item/item":4,"../store/store":5,"../view/view":7}],3:[function(e,t,i){"use strict";function n(e,t){return(t||document).querySelector(e)}function o(e,t,i,n){e.addEventListener(t,i,!!n)}function r(e,t,i,n,r){var l=function(i){for(var o=i.target,r=e.querySelectorAll(t),l=r.length;l--;)if(r[l]===o){n.call(o,i);break}};o(e,i,l,!!r)}Object.defineProperty(i,"__esModule",{value:!0}),i.qs=n,i.$on=o,i.$delegate=r;i.escapeForHTML=function(e){return e.replace(/[&<]/g,function(e){return"&"===e?"&amp;":"&lt;"})}},{}],4:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=(i.Item=void 0,i.ItemList=void 0,{Record:{}});i.EmptyItemQuery=void 0,i.emptyItemQuery=n.Record,i.ItemQuery=void 0,i.ItemUpdate=void 0},{}],5:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../item/item"),l=function(){function e(t,i){n(this,e);var o=window.localStorage,r=void 0;this.getLocalStorage=function(){return r||JSON.parse(o.getItem(t)||"[]")},this.setLocalStorage=function(e){o.setItem(t,JSON.stringify(r=e))},i&&i()}return o(e,[{key:"find",value:function(e,t){var i=this.getLocalStorage(),n=void 0;t(i.filter(function(t){for(n in e)if(e[n]!==t[n])return!1;return!0}))}},{key:"update",value:function(e,t){for(var i=e.id,n=this.getLocalStorage(),o=n.length,r=void 0;o--;)if(n[o].id===i){for(r in e)n[o][r]=e[r];break}this.setLocalStorage(n),t&&t()}},{key:"insert",value:function(e,t){var i=this.getLocalStorage();i.push(e),this.setLocalStorage(i),t&&t()}},{key:"remove",value:function(e,t){var i=void 0,n=this.getLocalStorage().filter(function(t){for(i in e)if(e[i]!==t[i])return!0;return!1});this.setLocalStorage(n),t&&t(n)}},{key:"count",value:function(e){this.find(r.emptyItemQuery,function(t){for(var i=t.length,n=i,o=0;n--;)o+=t[n].completed;e(i,i-o,o)})}}]),e}();i.default=l},{"../item/item":4}],6:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=(e("../item/item"),e("../helpers/helpers")),l=function(){function e(){n(this,e)}return o(e,[{key:"itemList",value:function(e){return e.reduce(function(e,t){return e+('\n<li data-id="'+t.id+'"'+(t.completed?' class="completed"':"")+'>\n    <input class="toggle" type="checkbox" '+(t.completed?"checked":"")+">\n    <label>"+(0,r.escapeForHTML)(t.title)+'</label>\n    <button class="destroy"></button>\n</li>')},"")}},{key:"itemCounter",value:function(e){return e+" item"+(1!==e?"s":"")+" left"}}]),e}();i.default=l},{"../helpers/helpers":3,"../item/item":4}],7:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=(e("../item/item"),e("../helpers/helpers")),a=e("../template/template"),u=(n(a),function(e){return parseInt(e.parentNode.dataset.id,10)}),s=13,c=27,d=function(){function e(t){var i=this;o(this,e),this.template=t,this.$todoList=(0,l.qs)(".todo-list"),this.$todoItemCounter=(0,l.qs)(".todo-count"),this.$clearCompleted=(0,l.qs)(".clear-completed"),this.$main=(0,l.qs)(".main"),this.$toggleAll=(0,l.qs)(".toggle-all"),this.$newTodo=(0,l.qs)(".new-todo"),(0,l.$delegate)(this.$todoList,"li label","dblclick",function(e){var t=e.target;i.editItem(t)})}return r(e,[{key:"editItem",value:function(e){var t=e.parentElement;t.classList.add("editing");var i=document.createElement("input");i.className="edit",i.value=e.innerText,t.appendChild(i),i.focus()}},{key:"showItems",value:function(e){this.$todoList.innerHTML=this.template.itemList(e)}},{key:"removeItem",value:function(e){var t=(0,l.qs)('[data-id="'+e+'"]');t&&this.$todoList.removeChild(t)}},{key:"setItemsLeft",value:function(e){this.$todoItemCounter.innerHTML=this.template.itemCounter(e)}},{key:"setClearCompletedButtonVisibility",value:function(e){var t=!!e;this.$clearCompleted.style.display=t?"block":"none"}},{key:"setMainVisibility",value:function(e){var t=!!e;this.$main.style.display=t?"block":"none"}},{key:"setCompleteAllCheckbox",value:function(e){this.$toggleAll.checked=!!e}},{key:"updateFilterButtons",value:function(e){(0,l.qs)(".filters>.selected").className=" ",(0,l.qs)('.filters>[href="#/'+e+'"]').className="selected"}},{key:"clearNewTodo",value:function(){this.$newTodo.value=""}},{key:"setItemComplete",value:function(e,t){var i=(0,l.qs)('[data-id="'+e+'"]');i&&(i.className=t?"completed":"",(0,l.qs)("input",i).checked=t)}},{key:"editItemDone",value:function(e,t){var i=(0,l.qs)('[data-id="'+e+'"]'),n=(0,l.qs)("input.edit",i);i.removeChild(n),i.classList.remove("editing"),(0,l.qs)("label",i).textContent=t}},{key:"bindAddItem",value:function(e){(0,l.$on)(this.$newTodo,"change",function(t){var i=t.target,n=i.value.trim();n&&e(n)})}},{key:"bindRemoveCompleted",value:function(e){(0,l.$on)(this.$clearCompleted,"click",e)}},{key:"bindToggleAll",value:function(e){(0,l.$on)(this.$toggleAll,"click",function(t){var i=t.target;e(i.checked)})}},{key:"bindRemoveItem",value:function(e){(0,l.$delegate)(this.$todoList,".destroy","click",function(t){var i=t.target;e(u(i))})}},{key:"bindToggleItem",value:function(e){(0,l.$delegate)(this.$todoList,".toggle","click",function(t){var i=t.target;e(u(i),i.checked)})}},{key:"bindEditItemSave",value:function(e){(0,l.$delegate)(this.$todoList,"li .edit","blur",function(t){var i=t.target;i.dataset.iscanceled||e(u(i),i.value.trim())},!0),(0,l.$delegate)(this.$todoList,"li .edit","keypress",function(e){var t=e.target,i=e.keyCode;i===s&&t.blur()})}},{key:"bindEditItemCancel",value:function(e){(0,l.$delegate)(this.$todoList,"li .edit","keyup",function(t){var i=t.target,n=t.keyCode;n===c&&(i.dataset.iscanceled=!0,i.blur(),e(u(i)))})}}]),e}();i.default=d},{"../helpers/helpers":3,"../item/item":4,"../template/template":6}]},{},[1]);